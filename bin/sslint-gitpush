#!/bin/bash
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd )"
WORKING_DIR=$(pwd)

if [ "$1" != "" ]; then
    dir=$1;
else
    dir='app/src'
fi

message='WIP'

while getopts m: flag
do
    case "${flag}" in
        m) message=${OPTARG};;
    esac
done

echo ""
echo ""
echo "---------------------------------";
echo "  Running GIT PUSH";
echo "---------------------------------";
echo "  directory of script: $SCRIPT_DIR";
echo "  directory to commit: $WORKING_DIR/$dir";
echo "  message: $message";
echo "---------------------------------";
echo "  Available settings:";
echo "  -d (directory)" ;
echo "  -m (commit message)";
echo "---------------------------------";
echo "  Example usage:"
echo "  e.g. sslint-gitpush app/src -m 'PATCH' ";
echo "---------------------------------";
echo ""
echo ""

echo "# going to right directory: $WORKING_DIR/$dir"
cd $WORKING_DIR/$dir

echo "# adding files to git repo"
git add . -A
#git add $WORKING_DIR/$also
#git add $WORKING_DIR/$logFile

echo "# committing files to git repo"
git commit . -m "$message"
#git commit $WORKING_DIR/$also -m "$message"
#git commit $WORKING_DIR/$logFile -m "$message"

echo "# pushing commits to git repo"
git push

echo "# going back to: $WORKING_DIR"
cd $WORKING_DIR
