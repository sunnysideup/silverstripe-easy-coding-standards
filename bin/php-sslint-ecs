#!/bin/bash
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd )"
WORKING_DIR=$(pwd)
: ${dir:=app/src}
: ${also:=app/_config.php}
: ${ecsConfig:=$SCRIPT_DIR/../sunnysideup/easy-coding-standards/ecs.yml}


echo "---------------------------------";
echo "Running Easy Conding Standards";
echo "---------------------------------";
echo "directory of script: $SCRIPT_DIR";
echo "directory to analyse: $WORKING_DIR/$dir";
echo "also check (e.g. _config.php file): $WORKING_DIR/$also";
echo "ecs config file: $ecsConfig";
echo "Available settings (in front of command: dir, also, ecsConfig)";
echo "e.g. dir=foo/bar php-sslint-ecs";
echo "---------------------------------";


if test -f "$WORKING_DIR/$also"; then
    $SCRIPT_DIR/ecs check $WORKING_DIR/$also --fix --clear-cache --config $ecsConfig
fi
$SCRIPT_DIR/ecs check $WORKING_DIR/$dir --fix --clear-cache --config $ecsConfig
