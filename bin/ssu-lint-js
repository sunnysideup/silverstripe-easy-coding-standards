#!/bin/bash


SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd )"
WORKING_DIR=$(pwd)
source $SCRIPT_DIR/ssu-methods

if [ "$1" != "" ]; then
    dir=$1;
else
    dir='app/client/src'
fi

while getopts a: flag
do
    case "${flag}" in
        a) dir=${OPTARG};;
    esac
done

help_and_exit() {
    echonice " ---------------------------------";
    echonice "   Available settings:";
    echonice " ---------------------------------";
    echonice "   --NONE--";
    echonice " "
    echonice " ---------------------------------";
    echonice "   Example usage:"
    echonice " ---------------------------------";
    echonice "   ssu-lint-js .";
    echonice "   ssu-lint-js foo/bar";
    echonice " ---------------------------------";
    echonice " "
    echonice " "
    exit;
}

while (( $# )); do
  case $1 in
    -*)               printf 'Unknown option: %q\n\n' "$1";
                      help_and_exit 1 ;;
    *)                dir=$1;;
  esac
  shift
done

echonice " "
echonice " "
echonice " ---------------------------------";
echonice "   Running JS Standard";
echonice " ---------------------------------";
echonice " "
echonice " "
echonice "   Make sure you have intalled and updated:";
echonice " ";
echonice "   sudo npm install standard --global'";
echonice " "
echonice " "
echonice " ---------------------------------";
echonice "   files to analyse: $WORKING_DIR/$dir/*.js";
echonice " ---------------------------------";
echonice "   Example usage:"
echonice "   e.g. ssu-lint-js app/client/javascript";
echonice "   e.g. ssu-lint-js .";
echonice " ---------------------------------";
echonice " "
echonice " "


standard --fix $dir/*.js
